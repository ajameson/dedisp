<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>dedisp: src/dedisp.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<h1>src/dedisp.h</h1><a href="dedisp_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> *  Copyright 2012 Ben Barsdell</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> *  Licensed under the Apache License, Version 2.0 (the "License");</span>
<a name="l00005"></a>00005 <span class="comment"> *  you may not use this file except in compliance with the License.</span>
<a name="l00006"></a>00006 <span class="comment"> *  You may obtain a copy of the License at</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> *  http://www.apache.org/licenses/LICENSE-2.0</span>
<a name="l00009"></a>00009 <span class="comment"> *</span>
<a name="l00010"></a>00010 <span class="comment"> *  Unless required by applicable law or agreed to in writing, software</span>
<a name="l00011"></a>00011 <span class="comment"> *      distributed under the License is distributed on an "AS IS" BASIS,</span>
<a name="l00012"></a>00012 <span class="comment"> *      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<a name="l00013"></a>00013 <span class="comment"> *  See the License for the specific language governing permissions and</span>
<a name="l00014"></a>00014 <span class="comment"> *  limitations under the License.</span>
<a name="l00015"></a>00015 <span class="comment"> */</span>
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 <span class="comment">/*</span>
<a name="l00018"></a>00018 <span class="comment">  dedisp.h</span>
<a name="l00019"></a>00019 <span class="comment">  By Ben Barsdell (2012)</span>
<a name="l00020"></a>00020 <span class="comment">  benbarsdell@gmail.com</span>
<a name="l00021"></a>00021 <span class="comment">  Originally developed while at the Centre for Astrophysics and Supercomputing,</span>
<a name="l00022"></a>00022 <span class="comment">  Swinburne University of Technology, Victoria, Australia</span>
<a name="l00023"></a>00023 <span class="comment">  </span>
<a name="l00024"></a>00024 <span class="comment">  Limitations:  in_nbits must be one of: 1, 2, 4, 8, 16, 32</span>
<a name="l00025"></a>00025 <span class="comment">               out_nbits must be one of: 8, 16, 32</span>
<a name="l00026"></a>00026 <span class="comment">*/</span>
<a name="l00027"></a>00027 
<a name="l00040"></a>00040 <span class="preprocessor">#ifndef DEDISP_H_INCLUDE_GUARD</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span><span class="preprocessor">#define DEDISP_H_INCLUDE_GUARD</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span>
<a name="l00043"></a>00043 <span class="comment">// Use C linkage to allow cross-language use of the library</span>
<a name="l00044"></a>00044 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">"C"</span> {
<a name="l00046"></a>00046 <span class="preprocessor">#endif</span>
<a name="l00047"></a>00047 <span class="preprocessor"></span>
<a name="l00048"></a>00048 <span class="comment">// Types</span>
<a name="l00049"></a>00049 <span class="comment">// -----</span>
<a name="l00050"></a><a class="code" href="dedisp_8h.html#3ec44b5c18c1f4f3e0793625b4ed02c5">00050</a> <span class="keyword">typedef</span> <span class="keywordtype">float</span>                      <a class="code" href="dedisp_8h.html#3ec44b5c18c1f4f3e0793625b4ed02c5">dedisp_float</a>;
<a name="l00051"></a><a class="code" href="dedisp_8h.html#10879139ec0a01c4c6d0f09980b79011">00051</a> <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>              <a class="code" href="dedisp_8h.html#10879139ec0a01c4c6d0f09980b79011">dedisp_byte</a>;
<a name="l00052"></a><a class="code" href="dedisp_8h.html#fdd16d54b665e37c99fcdb30bdad44f1">00052</a> <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>              <a class="code" href="dedisp_8h.html#fdd16d54b665e37c99fcdb30bdad44f1">dedisp_size</a>;
<a name="l00053"></a><a class="code" href="dedisp_8h.html#2a2d0a26c21b1b7216c92527bd74e59e">00053</a> <span class="keyword">typedef</span> <span class="keywordtype">int</span>                        <a class="code" href="dedisp_8h.html#2a2d0a26c21b1b7216c92527bd74e59e">dedisp_bool</a>;
<a name="l00054"></a><a class="code" href="dedisp_8h.html#692c8b46dffe868c96bfc937195345ef">00054</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>dedisp_plan_struct* <a class="code" href="dedisp_8h.html#692c8b46dffe868c96bfc937195345ef">dedisp_plan</a>;
<a name="l00055"></a>00055 
<a name="l00067"></a>00067 <span class="comment">// Flags</span>
<a name="l00068"></a>00068 <span class="comment">// -----</span>
<a name="l00069"></a><a class="code" href="dedisp_8h.html#33ba86e5ae48594ba14ee6c63cb1704e">00069</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
<a name="l00070"></a>00070         DEDISP_USE_DEFAULT       = 0,
<a name="l00071"></a>00071         DEDISP_HOST_POINTERS     = 1 &lt;&lt; 1,
<a name="l00072"></a>00072         DEDISP_DEVICE_POINTERS   = 1 &lt;&lt; 2,
<a name="l00073"></a>00073         
<a name="l00074"></a>00074         DEDISP_WAIT              = 1 &lt;&lt; 3,
<a name="l00075"></a>00075         DEDISP_ASYNC             = 1 &lt;&lt; 4
<a name="l00076"></a>00076 } <a class="code" href="dedisp_8h.html#33ba86e5ae48594ba14ee6c63cb1704e">dedisp_flag</a>;
<a name="l00077"></a>00077 
<a name="l00087"></a>00087 <span class="comment">// Error codes</span>
<a name="l00088"></a>00088 <span class="comment">// -----------</span>
<a name="l00089"></a><a class="code" href="dedisp_8h.html#630970185d44d8785c03e421b2165db9">00089</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
<a name="l00090"></a>00090         DEDISP_NO_ERROR,
<a name="l00091"></a>00091         DEDISP_MEM_ALLOC_FAILED,
<a name="l00092"></a>00092         DEDISP_MEM_COPY_FAILED,
<a name="l00093"></a>00093         DEDISP_NCHANS_EXCEEDS_LIMIT,
<a name="l00094"></a>00094         DEDISP_INVALID_PLAN,
<a name="l00095"></a>00095         DEDISP_INVALID_POINTER,
<a name="l00096"></a>00096         DEDISP_INVALID_STRIDE,
<a name="l00097"></a>00097         DEDISP_NO_DM_LIST_SET,
<a name="l00098"></a>00098         DEDISP_TOO_FEW_NSAMPS,
<a name="l00099"></a>00099         DEDISP_INVALID_FLAG_COMBINATION,
<a name="l00100"></a>00100         DEDISP_UNSUPPORTED_IN_NBITS,
<a name="l00101"></a>00101         DEDISP_UNSUPPORTED_OUT_NBITS,
<a name="l00102"></a>00102         DEDISP_INVALID_DEVICE_INDEX,
<a name="l00103"></a>00103         DEDISP_DEVICE_ALREADY_SET,
<a name="l00104"></a>00104         DEDISP_PRIOR_GPU_ERROR,
<a name="l00105"></a>00105         DEDISP_INTERNAL_GPU_ERROR,
<a name="l00106"></a>00106         DEDISP_UNKNOWN_ERROR
<a name="l00107"></a>00107 } <a class="code" href="dedisp_8h.html#630970185d44d8785c03e421b2165db9">dedisp_error</a>;
<a name="l00108"></a>00108 
<a name="l00109"></a>00109 
<a name="l00131"></a>00131 <span class="comment">// Plan management</span>
<a name="l00132"></a>00132 <span class="comment">// ---------------</span>
<a name="l00147"></a>00147 <span class="comment"></span>dedisp_error <a class="code" href="dedisp_8h.html#b819f3a971be67eb6c2a1557415188f1">dedisp_create_plan</a>(dedisp_plan* plan,
<a name="l00148"></a>00148                                 dedisp_size  nchans,
<a name="l00149"></a>00149                                 dedisp_float dt,
<a name="l00150"></a>00150                                 dedisp_float f0,
<a name="l00151"></a>00151                                 dedisp_float df);
<a name="l00152"></a>00152 
<a name="l00157"></a>00157 <span class="keywordtype">void</span>         <a class="code" href="dedisp_8h.html#be4326517c7b93ad32fe3705d9fbf084">dedisp_destroy_plan</a>(dedisp_plan plan);
<a name="l00158"></a>00158 
<a name="l00159"></a>00159 <span class="comment">// Setters</span>
<a name="l00160"></a>00160 <span class="comment">// -------</span>
<a name="l00173"></a>00173 <span class="comment"></span>dedisp_error <a class="code" href="dedisp_8h.html#da97c83e766f1e6b2ff1d354a9f96de4">dedisp_set_device</a>(<span class="keywordtype">int</span> device_idx);
<a name="l00174"></a>00174 
<a name="l00184"></a>00184 dedisp_error <a class="code" href="dedisp_8h.html#8baf1e8487335512bed01b00530bd9d9">dedisp_set_gulp_size</a>(dedisp_plan plan,
<a name="l00185"></a>00185                                   dedisp_size gulp_size);
<a name="l00191"></a>00191 dedisp_size  <a class="code" href="dedisp_8h.html#4b3d74d48e84ceb4e324a896d14750cf">dedisp_get_gulp_size</a>(dedisp_plan plan);
<a name="l00205"></a>00205 dedisp_error <a class="code" href="dedisp_8h.html#02060c6d44366204598348d4cc7946f8">dedisp_set_killmask</a>(dedisp_plan        plan,
<a name="l00206"></a>00206                                  <span class="keyword">const</span> dedisp_bool* killmask);
<a name="l00207"></a>00207 
<a name="l00208"></a>00208 <span class="comment">//dedisp_error dedisp_set_stream(dedisp_plan   plan,</span>
<a name="l00209"></a>00209 <span class="comment">//                               dedisp_stream stream);</span>
<a name="l00210"></a>00210 
<a name="l00225"></a>00225 dedisp_error <a class="code" href="dedisp_8h.html#174701ea1affefe6c6b27d91234ace89">dedisp_set_dm_list</a>(dedisp_plan         plan,
<a name="l00226"></a>00226                                 <span class="keyword">const</span> dedisp_float* dm_list,
<a name="l00227"></a>00227                                 dedisp_size         count);
<a name="l00244"></a>00244 dedisp_error <a class="code" href="dedisp_8h.html#128f39a882d1beedd48712e112b6b039">dedisp_generate_dm_list</a>(dedisp_plan  plan,
<a name="l00245"></a>00245                                      dedisp_float dm_start,
<a name="l00246"></a>00246                                      dedisp_float dm_end,
<a name="l00247"></a>00247                                      dedisp_float pulse_width,
<a name="l00248"></a>00248                                      dedisp_float tol);
<a name="l00249"></a>00249 
<a name="l00250"></a>00250 <span class="comment">// Getters</span>
<a name="l00251"></a>00251 <span class="comment">// -------</span>
<a name="l00259"></a>00259 <span class="comment"></span>dedisp_size         <a class="code" href="dedisp_8h.html#947c012731e052de54e437a1ffa97c89">dedisp_get_max_delay</a>(<span class="keyword">const</span> dedisp_plan plan);
<a name="l00264"></a>00264 dedisp_size         <a class="code" href="dedisp_8h.html#71d2d9270c88205623b1f823a2cb149e">dedisp_get_channel_count</a>(<span class="keyword">const</span> dedisp_plan plan);
<a name="l00269"></a>00269 dedisp_size         <a class="code" href="dedisp_8h.html#8b4aac60c709096ccb06cacd38b091df">dedisp_get_dm_count</a>(<span class="keyword">const</span> dedisp_plan plan);
<a name="l00275"></a>00275 <span class="keyword">const</span> dedisp_float* <a class="code" href="dedisp_8h.html#d360f62c1ca8a4aa694126e4842dfb30">dedisp_get_dm_list</a>(<span class="keyword">const</span> dedisp_plan plan);
<a name="l00281"></a>00281 <span class="keyword">const</span> dedisp_bool*  <a class="code" href="dedisp_8h.html#383c11548e6970318a763110861d2197">dedisp_get_killmask</a>(<span class="keyword">const</span> dedisp_plan plan);
<a name="l00287"></a>00287 dedisp_float        <a class="code" href="dedisp_8h.html#8a2884066e744914f894ccdb133197be">dedisp_get_dt</a>(<span class="keyword">const</span> dedisp_plan plan);
<a name="l00292"></a>00292 dedisp_float        <a class="code" href="dedisp_8h.html#3af97c8ae95c0accffcc188568046182">dedisp_get_f0</a>(<span class="keyword">const</span> dedisp_plan plan);
<a name="l00299"></a>00299 dedisp_float        <a class="code" href="dedisp_8h.html#592dcbaad189c6906643e441d2eb1d7c">dedisp_get_df</a>(<span class="keyword">const</span> dedisp_plan plan);
<a name="l00306"></a>00306 <span class="keyword">const</span> <span class="keywordtype">char</span>*         <a class="code" href="dedisp_8h.html#7c0200cf427ae2a373045676723df314">dedisp_get_error_string</a>(dedisp_error error);
<a name="l00307"></a>00307 
<a name="l00308"></a>00308 <span class="comment">// Plan execution</span>
<a name="l00309"></a>00309 <span class="comment">// --------------</span>
<a name="l00351"></a>00351 <span class="comment"></span>dedisp_error <a class="code" href="dedisp_8h.html#4c7d171691b7d69bf53db871568d5841">dedisp_execute</a>(<span class="keyword">const</span> dedisp_plan  plan,
<a name="l00352"></a>00352                             dedisp_size        nsamps,
<a name="l00353"></a>00353                             <span class="keyword">const</span> dedisp_byte* in,
<a name="l00354"></a>00354                             dedisp_size        in_nbits,
<a name="l00355"></a>00355                             dedisp_byte*       out,
<a name="l00356"></a>00356                             dedisp_size        out_nbits,
<a name="l00357"></a>00357                             <span class="keywordtype">unsigned</span>           flags);
<a name="l00400"></a>00400 dedisp_error <a class="code" href="dedisp_8h.html#e8422395d3899c685d6fea603686cf74">dedisp_execute_adv</a>(<span class="keyword">const</span> dedisp_plan  plan,
<a name="l00401"></a>00401                                 dedisp_size        nsamps,
<a name="l00402"></a>00402                                 <span class="keyword">const</span> dedisp_byte* in,
<a name="l00403"></a>00403                                 dedisp_size        in_nbits,
<a name="l00404"></a>00404                                 dedisp_size        in_stride,
<a name="l00405"></a>00405                                 dedisp_byte*       out,
<a name="l00406"></a>00406                                 dedisp_size        out_nbits,
<a name="l00407"></a>00407                                 dedisp_size        out_stride,
<a name="l00408"></a>00408                                 <span class="keywordtype">unsigned</span>           flags);
<a name="l00451"></a>00451 dedisp_error <a class="code" href="dedisp_8h.html#802bd0fc13d2a47c44a306a6a02d074e">dedisp_execute_guru</a>(<span class="keyword">const</span> dedisp_plan  plan,
<a name="l00452"></a>00452                                  dedisp_size        nsamps,
<a name="l00453"></a>00453                                  <span class="keyword">const</span> dedisp_byte* in,
<a name="l00454"></a>00454                                  dedisp_size        in_nbits,
<a name="l00455"></a>00455                                  dedisp_size        in_stride,
<a name="l00456"></a>00456                                  dedisp_byte*       out,
<a name="l00457"></a>00457                                  dedisp_size        out_nbits,
<a name="l00458"></a>00458                                  dedisp_size        out_stride,
<a name="l00459"></a>00459                                  dedisp_size        first_dm_idx,
<a name="l00460"></a>00460                                  dedisp_size        dm_count,
<a name="l00461"></a>00461                                  <span class="keywordtype">unsigned</span>           flags);
<a name="l00462"></a>00462 
<a name="l00463"></a>00463 <span class="comment">// TODO: CHECK THE STATUS OF THIS FEATURE</span>
<a name="l00472"></a>00472 <span class="comment"></span>dedisp_error <a class="code" href="dedisp_8h.html#ec61942576a3c3b393e02ac1e6d10041">dedisp_sync</a>(<span class="keywordtype">void</span>);
<a name="l00473"></a>00473 
<a name="l00474"></a>00474 
<a name="l00475"></a>00475 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00476"></a>00476 <span class="preprocessor"></span>} <span class="comment">// closing brace for extern "C"</span>
<a name="l00477"></a>00477 <span class="preprocessor">#endif</span>
<a name="l00478"></a>00478 <span class="preprocessor"></span>
<a name="l00479"></a>00479 <span class="preprocessor">#endif // DEDISP_H_INCLUDE_GUARD</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Mon Jan 23 10:13:24 2012 for dedisp by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
